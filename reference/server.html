<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a SMTP server object. — server • emayili</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a SMTP server object. — server"><meta property="og:description" content="Create an object which can be used to send messages to an SMTP server."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">emayili</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/datawookie/emayili/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a SMTP server object.</h1>
    <small class="dont-index">Source: <a href="https://github.com/datawookie/emayili/blob/HEAD/R/server.R" class="external-link"><code>R/server.R</code></a></small>
    <div class="hidden name"><code>server.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create an object which can be used to send messages to an SMTP server.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">server</span><span class="op">(</span></span>
<span>  <span class="va">host</span>,</span>
<span>  port <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  username <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  password <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  insecure <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reuse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  helo <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  protocol <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  use_ssl <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  test <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pause_base <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max_times <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gmail</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sendgrid</span><span class="op">(</span><span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mailgun</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sendinblue</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mailersend</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mailfence</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">zeptomail</span><span class="op">(</span><span class="va">password</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">smtpbucket</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mailtrap</span><span class="op">(</span><span class="va">username</span>, <span class="va">password</span>, sandbox <span class="op">=</span> <span class="cn">FALSE</span>, bulk <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>host</dt>
<dd><p>DNS name or IP address of the SMTP server.</p></dd>


<dt>port</dt>
<dd><p>Port that the SMTP server is listening on.</p></dd>


<dt>username</dt>
<dd><p>Username for SMTP server.</p></dd>


<dt>password</dt>
<dd><p>Password for SMTP server or API key.</p></dd>


<dt>insecure</dt>
<dd><p>Whether to ignore SSL issues.</p></dd>


<dt>reuse</dt>
<dd><p>Whether the connection to the SMTP server should be left open for reuse.</p></dd>


<dt>helo</dt>
<dd><p>The HELO domain name of the sending host. If left as <code>NA</code> then will use local host name.</p></dd>


<dt>protocol</dt>
<dd><p>Which protocol (SMTP or SMTPS) to use for communicating with
the server. Default will choose appropriate protocol based on port.</p></dd>


<dt>use_ssl</dt>
<dd><p>Whether to use SSL. If not specified then SSL will be used if the port is 465 or 587.
This enables SSL on non-standard ports.</p></dd>


<dt>test</dt>
<dd><p>Test login to server.</p></dd>


<dt>pause_base</dt>
<dd><p>Base delay (in seconds) for exponential backoff. See <a href="https://purrr.tidyverse.org/reference/rate-helpers.html" class="external-link">rate_backoff</a>.</p></dd>


<dt>max_times</dt>
<dd><p>Maximum number of times to retry.</p></dd>


<dt>...</dt>
<dd><p>Additional curl options. See <code><a href="https://rdrr.io/pkg/curl/man/curl_options.html" class="external-link">curl::curl_options()</a></code> for a list of supported options.</p></dd>


<dt>sandbox</dt>
<dd><p>Use email sandbox to test server.</p></dd>


<dt>bulk</dt>
<dd><p>Send bulk mail to multiple recipients.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A function which is used to send messages to the server.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>These functions return a function that can then be called with a message
object. This function mediates the interaction with the Simple Mail Transfer
Protocol (SMTP) server.</p>
<p>SMTP is a plain text protocol, which means that it is not secure. The secure
variant, SMTPS, comes in two flavours: TLS and StartTLS. With TLS (also
called Implicit TLS) the connection with the server is initiated using an
Secure Socket Layer (SSL) or Transport Layer Security (TLS) certificate. Such
a connection is secure from the start. By contract, a StartTLS connection is
initiated in plain text and then upgraded to TLS if possible. By convention
TLS operates on port 465 and StartTLS on port 587.</p>
<p>The specifications of an SMTP server are given in an SMTP URL, which takes one
of the following forms:</p><ul><li><p><code>mail.example.com</code> — hostname only</p></li>
<li><p><code>mail.example.com:587</code> — hostname and port</p></li>
<li><p><code>smtp://mail.example.com</code> — SMTP URL (default port)</p></li>
<li><p><code>smtps://mail.example.com</code> — SMTPS URL (default port)</p></li>
<li><p><code>smtp://mail.example.com:25</code> — SMTP URL (explicit port)</p></li>
<li><p><code>smtps://mail.example.com:587</code> — SMTPS URL (explicit port)</p></li>
</ul></div>
    <div id="gmail">
    <h2>Gmail</h2>
    


<p>If you're having trouble authenticating with Gmail then you should try the following:</p><ul><li><p>enable 2-factor authentication and</p></li>
<li><p>create an app password.</p></li>
</ul><p>Then use the app password rather than your usual account password.</p>
    </div>
    <div id="sendgrid">
    <h2>Sendgrid</h2>
    


<p>To use SendGrid you'll need to first <a href="https://www.twilio.com/docs/sendgrid/for-developers/sending-email/integrating-with-the-smtp-api" class="external-link">create an API key</a>. # nolint
Then use the API key as the password.</p>
<p>SendGrid will accept messages on ports 25, 587 and 2525 (using SMTP) as well
as 465 (using SMTPS).</p>
    </div>
    <div id="mailgun">
    <h2>Mailgun</h2>
    


<p>To use Mailgun you'll need to first register a sender domain. This will then
be assigned a username and password.</p>
<p>Mailgun will accept messages on ports 25 and 587 (using SMTP) as well as 465
(using SMTPS).</p>
    </div>
    <div id="sendinblue">
    <h2>Sendinblue</h2>
    


<p>To use Sendinblue you'll need to first create an account. You'll find your
SMTP username and password in the SMTP &amp; API section of your account
settings.</p>
    </div>
    <div id="mailersend">
    <h2>MailerSend</h2>
    


<p>To use MailerSend you'll need to first create an account. You'll find your
SMTP username and password under Domains. See <a href="https://www.mailersend.com/help/smtp-relay" class="external-link">How to send emails
via SMTP with MailerSend</a>.</p>
<p>Although this is not likely to be a problem in practice, MailerSend insists
that all messages have at minimum a valid subject and either text or HTML
content.</p>
    </div>
    <div id="mailfence">
    <h2>Mailfence</h2>
    


<p>To use Mailfence you'll need to create a premium account.</p>
    </div>
    <div id="zeptomail">
    <h2>ZeptoMail</h2>
    


<p>Zeptomail is an email sending service provided by Zoho Corporation. It is
designed primarily for transactional email delivery, which includes emails
like password resets, order confirmations, notifications, and other
automated, non-marketing communications that websites and applications need
to send to their users.</p>
    </div>
    <div id="smtp-bucket">
    <h2>SMTP Bucket</h2>
    


<p>SMTP Bucket is a fake SMTP server that captures all the messages it receives
and makes them available through a website or REST API.</p>


<p>SMTP Bucket is a fake SMTP server that captures all the messages it receives
and makes them available through a website or REST API.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Set parameters for SMTP server (with username and password).</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">server</span><span class="op">(</span></span></span>
<span class="r-in"><span>  host <span class="op">=</span> <span class="st">"smtp.gmail.com"</span>,</span></span>
<span class="r-in"><span>  port <span class="op">=</span> <span class="fl">587</span>,</span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"bob@gmail.com"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"bd40ef6d4a9413de9c1318a65cbae5d7"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set parameters for a (fake) testing SMTP server.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># More information about this service can be found at https://www.smtpbucket.com/.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">server</span><span class="op">(</span></span></span>
<span class="r-in"><span>  host <span class="op">=</span> <span class="st">"mail.smtpbucket.com"</span>,</span></span>
<span class="r-in"><span>  port <span class="op">=</span> <span class="fl">8025</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a message</span></span></span>
<span class="r-in"><span><span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu"><a href="envelope.html">envelope</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="addresses.html">from</a></span><span class="op">(</span><span class="st">"bob@gmail.com"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="addresses.html">to</a></span><span class="op">(</span><span class="st">"alice@yahoo.com"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Send message (verbose output from interactions with server)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">smtp</span><span class="op">(</span><span class="va">msg</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To confirm that the message was sent, go to https://www.smtpbucket.com/ then:</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># - fill in "bob@gmail.com" for the Sender field and</span></span></span>
<span class="r-in"><span><span class="co"># - fill in "alice@yahoo.com" for the Recipient field then</span></span></span>
<span class="r-in"><span><span class="co"># - press the Search button.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With explicit HELO domain.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">server</span><span class="op">(</span></span></span>
<span class="r-in"><span>  host <span class="op">=</span> <span class="st">"mail.example.com"</span>,</span></span>
<span class="r-in"><span>  helo <span class="op">=</span> <span class="st">"client.example.com"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set parameters for Gmail SMTP server. The host and port are implicit.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">gmail</span><span class="op">(</span></span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"bob@gmail.com"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"bd40ef6d4a9413de9c1318a65cbae5d7"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set API key for SendGrid SMTP server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">sendgrid</span><span class="op">(</span></span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"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"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set username and password for Mailgun SMTP server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">mailgun</span><span class="op">(</span></span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"postmaster@sandbox9ptce35fdf0b31338dec4284eb7aaa59.mailgun.org"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"44d072e7g2b5f3bf23b2b642da0fe3a7-2ac825a1-a5be680a"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set username and password for Sendinblue SMTP server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">sendinblue</span><span class="op">(</span></span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"bob@gmail.com"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"xsmtpsib-c75cf91323adc53a1747c005447cbc9a893c35888635bb7bef1a624bf773da33"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set username and password for MailerSend SMTP server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">mailersend</span><span class="op">(</span></span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"NS_Pf3ALM@gmail.com"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"e5ATWLlTnWWDaKeE"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set username and password for Mailfence SMTP server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">mailfence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  username <span class="op">=</span> <span class="st">"bob"</span>,</span></span>
<span class="r-in"><span>  password <span class="op">=</span> <span class="st">"F!Uosd6xbhSjd%63"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set password for ZeptoMail SMTP server.</span></span></span>
<span class="r-in"><span><span class="co"># nolint start</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">zeptomail</span><span class="op">(</span><span class="st">"yA6KbHsL4l2mmI8Ns0/fs9iSTj8yG0dYBgfIG0j6Fsv4P2uV32xh8ciEYNYlRkgCC7wRfkgWA=="</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># nolint end</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># SMTP Bucket server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">smtpbucket</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># SMTP Bucket server.</span></span></span>
<span class="r-in"><span><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu">smtpbucket</span><span class="op">(</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://datawookie.netlify.com/" class="external-link">Andrew B. Collier</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

