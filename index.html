<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Send Email Messages • emayili</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Send Email Messages">
<meta property="og:description" content="A light, simple tool for sending emails with minimal dependencies.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">emayili</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.14</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/datawookie/emayili/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="emayili-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#emayili-" class="anchor"></a>emayili <img src="reference/figures/emayili-hex.png" align="right" alt="" width="120">
</h1></div>
<!-- badges: start -->

<p>emayili is a package for sending emails from R. The design goals are:</p>
<ul>
<li>works on all manner of SMTP servers and</li>
<li>has minimal dependencies (or dependencies which are easily satisfied).</li>
</ul>
<p>The package name is an adaption of the Zulu word for email, imeyili.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Get the stable version from <a href="https://CRAN.R-project.org/package=emayili">CRAN</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"emayili"</span><span class="op">)</span></code></pre></div>
<p>Or grab it directly from <a href="https://github.com/datawookie/emayili">GitHub</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install from the master branch.</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"datawookie/emayili"</span><span class="op">)</span>
<span class="co"># Install from the development branch.</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"datawookie/emayili"</span>, ref <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>First create a message object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://datawookie.github.io/emayili/">emayili</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>

<span class="va">email</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envelope.html">envelope</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="creating-a-message" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-message" class="anchor"></a>Creating a Message</h3>
<p>The message has class <code>envelope</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">email</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>[<span class="dv">1</span>] <span class="st">"envelope"</span></span></code></pre></div>
<p>Add addresses for the sender and recipient.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="va">email</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/from.html">from</a></span><span class="op">(</span><span class="st">"alice@yahoo.com"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/to.html">to</a></span><span class="op">(</span><span class="st">"bob@google.com"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/cc.html">cc</a></span><span class="op">(</span><span class="st">"craig@google.com"</span><span class="op">)</span></code></pre></div>
<p>There are also <code><a href="reference/bcc.html">bcc()</a></code> and <code><a href="reference/reply.html">reply()</a></code> functions for setting the <code>Bcc</code> and <code>Reply-To</code> fields.</p>
<p>Add a subject.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="va">email</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/subject.html">subject</a></span><span class="op">(</span><span class="st">"This is a plain text message!"</span><span class="op">)</span></code></pre></div>
<p>Add a text body. You can use <code><a href="reference/html.html">html()</a></code> to add an HTML body.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="va">email</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/text.html">text</a></span><span class="op">(</span><span class="st">"Hello!"</span><span class="op">)</span></code></pre></div>
<p>Add an attachment.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="va">email</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/attachment.html">attachment</a></span><span class="op">(</span><span class="st">"image.jpg"</span><span class="op">)</span></code></pre></div>
<p>You can also create the message in a single command:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envelope.html">envelope</a></span><span class="op">(</span>
  to <span class="op">=</span> <span class="st">"bob@google.com"</span>,
  from <span class="op">=</span> <span class="st">"alice@yahoo.com"</span>,
  subject <span class="op">=</span> <span class="st">"This is a plain text message!"</span>,
  text <span class="op">=</span> <span class="st">"Hello!"</span>
<span class="op">)</span></code></pre></div>
<p>Simply printing a message displays the header information.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>Date<span class="op">:</span><span class="st">         </span>Wed, <span class="dv">14</span> Jul <span class="dv">2021</span> <span class="dv">09</span><span class="op">:</span><span class="dv">58</span><span class="op">:</span><span class="dv">59</span> GMT</span>
<span id="cb12-2"><a href="#cb12-2"></a>From<span class="op">:</span><span class="st">         </span>alice<span class="op">@</span>yahoo.com</span>
<span id="cb12-3"><a href="#cb12-3"></a>To<span class="op">:</span><span class="st">           </span>bob<span class="op">@</span>google.com</span>
<span id="cb12-4"><a href="#cb12-4"></a>Cc<span class="op">:</span><span class="st">           </span>craig<span class="op">@</span>google.com</span>
<span id="cb12-5"><a href="#cb12-5"></a>Subject<span class="op">:</span><span class="st">      </span>This is a plain text message<span class="op">!</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>X<span class="op">-</span>Mailer<span class="op">:</span><span class="st">     </span>{emayili}<span class="op">-</span><span class="dv">0</span>.<span class="fl">4.12</span></span></code></pre></div>
<p>You can identify emails which have been sent using <a href="https://datawookie.github.io/emayili/">emayili</a> by the presence of an <code>X-Mailer</code> header which includes both the package name and version.</p>
<p>If you want to see the complete MIME object, just convert to a string.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">email</span><span class="op">)</span></code></pre></div>
</div>
<div id="adding-an-inline-image" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-an-inline-image" class="anchor"></a>Adding an Inline Image</h3>
<p>Adding an inline image to an HTML message is possible. There are two ways to achieve this.</p>
<p><em>1. Base64 Encoding</em></p>
<p>First you’ll need to <a href="https://en.wikipedia.org/wiki/Base64">Base64 encode</a> the image.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">img_base64</span> <span class="op">&lt;-</span> <span class="fu">base64enc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/base64enc/man/base64.html">base64encode</a></span><span class="op">(</span><span class="st">"image.jpg"</span><span class="op">)</span></code></pre></div>
<p>Then create the HTML message body.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">html_body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">'&lt;html&gt;&lt;body&gt;&lt;img src="data:image/jpeg;base64,%s"&gt;&lt;/body&gt;&lt;/html&gt;'</span>, <span class="va">img_base64</span><span class="op">)</span></code></pre></div>
<p>And finally add it to the email.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envelope.html">envelope</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/html.html">html</a></span><span class="op">(</span><span class="va">html_body</span><span class="op">)</span></code></pre></div>
<p><em>Note:</em> It’s important that you specify the appropriate media type (<code>image/jpeg</code> for JPEG and <code>image/png</code> for PNG).</p>
<p><em>2. Using a CID</em></p>
<p>Unfortunately some mail clients (like Gmail) will not display Base64 encoded images. In this case using a CID is a working alternative.</p>
<p>First create the message body which references an image by CID.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">html_body</span> <span class="op">&lt;-</span> <span class="st">'&lt;html&gt;&lt;body&gt;&lt;img src="cid:image"&gt;&lt;/body&gt;&lt;/html&gt;'</span></code></pre></div>
<p>Then attach the image and specify the <code>cid</code> argument.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">email</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envelope.html">envelope</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/html.html">html</a></span><span class="op">(</span><span class="va">html_body</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/attachment.html">attachment</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"image.jpg"</span>, cid <span class="op">=</span> <span class="st">"image"</span><span class="op">)</span></code></pre></div>
</div>
<div id="sending-a-message" class="section level3">
<h3 class="hasAnchor">
<a href="#sending-a-message" class="anchor"></a>Sending a Message</h3>
<p>Create a SMTP server object and send the message.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">smtp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/server.html">server</a></span><span class="op">(</span>host <span class="op">=</span> <span class="st">"smtp.gmail.com"</span>,
               port <span class="op">=</span> <span class="fl">465</span>,
               username <span class="op">=</span> <span class="st">"bob@gmail.com"</span>,
               password <span class="op">=</span> <span class="st">"bd40ef6d4a9413de9c1318a65cbae5d7"</span><span class="op">)</span>
<span class="fu">smtp</span><span class="op">(</span><span class="va">email</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>To see the guts of the message as passed to the SMTP server:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">email</span>, details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="using-starttls" class="section level3">
<h3 class="hasAnchor">
<a href="#using-starttls" class="anchor"></a>Using STARTTLS</h3>
<p>If you’re trying to send email with a host that uses the STARTTLS security protocol (like Google Mail, Yahoo! or AOL), then it will most probably be blocked due to insufficient security. In order to circumvent this, you can grant access to less secure apps. See the links below for specifics:</p>
<ul>
<li>
<a href="https://myaccount.google.com/security">Google</a> (<a href="https://support.google.com/accounts/answer/6010255">details</a>)</li>
<li>
<a href="https://login.yahoo.com/account/security">Yahoo!</a> and</li>
<li>
<a href="https://login.aol.com/account/security">AOL</a>.</li>
</ul>
</div>
</div>
<div id="standards-documents" class="section level2">
<h2 class="hasAnchor">
<a href="#standards-documents" class="anchor"></a>Standards Documents</h2>
<p>The following (draft) standards documents relate to emails:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc2822">RFC 2822</a></li>
<li><a href="https://tools.ietf.org/html/rfc5322">RFC 5322</a></li>
<li>
<a href="https://tools.ietf.org/html/rfc6854">RFC 6854</a> (an update to RFC 5322).</li>
</ul>
</div>
<div id="similar-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#similar-packages" class="anchor"></a>Similar Packages</h2>
<p>There is a selection of other R packages which also send emails:</p>
<ul>
<li><a href="https://cran.r-project.org/package=blastula">blastula</a></li>
<li>
<a href="https://cran.r-project.org/package=blatr">blatr</a> (Windows)</li>
<li><a href="https://cran.r-project.org/package=gmailr">gmailr</a></li>
<li><a href="https://cran.r-project.org/package=mail">mail</a></li>
<li><a href="https://cran.r-project.org/package=mailR">mailR</a></li>
<li><a href="https://cran.r-project.org/package=sendmailR">sendmailR</a></li>
<li><a href="https://github.com/ropensci-archive/ponyexpress">ponyexpress</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=emayili">https://​cloud.r-project.org/​package=emayili</a>
</li>
<li>Browse source code at <br><a href="https://github.com/datawookie/emayili/">https://​github.com/​datawookie/​emayili/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/datawookie/emayili/issues">https://​github.com/​datawookie/​emayili/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://datawookie.netlify.com/">Andrew B. Collier</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=emayili"><img src="https://www.r-pkg.org/badges/version/emayili" alt="CRAN status"></a></li>
<li><a href="https://codecov.io/github/datawookie/emayili"><img src="https://img.shields.io/codecov/c/github/datawookie/emayili.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://datawookie.netlify.com/">Andrew B. Collier</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
